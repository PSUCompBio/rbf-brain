import argparse
################# CLI ARGUMENT CONFIG ##################
# Setting up Argument parsing
parser = argparse.ArgumentParser(description='A Utility package to generate Parameters (PRM) from STL File')
parser.add_argument('--input', default=None, type=str, help="Path to your STL File");
parser.add_argument('--output', default=None, type=str, help="Path to save your Parameters File");
args = parser.parse_args()

#########################################################
# If arguments are invalid or none then exit the script with error !

if (args.input  == None or args.output == None):
    parser.print_help()
    sys.exit(0)

stl_file_path = args.input
parameters_file_path = args.output

#########################################################
#Locate control points and write them to the input file

fr = open(stl_file_path, 'r')
fw = open(parameters_file_path, 'w')
fw.write("[Radial Basis Functions]\n")
fw.write("basis function: polyharmonic_spline\n")
fw.write("radius: 2\n")
fw.write("power: 1\n\n")
fw.write("[Control points]\n\n")
fw.write("original control points:  0.000000 -0.344584 -0.116511\n")
fw.write("                          0.000000 -0.359053 -0.117872\n")
fw.write("                          0.000000 -0.375411 -0.113755\n")
fw.write("                          -0.027935 -0.354812 -0.112338\n")
fw.write("                          0.000000 -0.419122 -0.068744\n")
fw.write("                          -0.046174 -0.353816 -0.095481\n")
fw.write("                          -0.021038 -0.411910 -0.076377\n")
fw.write("                          0.000000 -0.426570 -0.045181\n")
fw.write("                          0.000000 -0.427913 -0.015713\n")
fw.write("                          0.000000 -0.424007 0.008776\n")
fw.write("                          -0.027685 -0.415927 0.007187\n")
fw.write("                          -0.041118 -0.386758 -0.088144\n")
fw.write("                          -0.059702 -0.383669 -0.019111\n")
fw.write("                          0.000000 -0.411373 0.031315\n")
fw.write("                          0.000000 -0.390853 0.046595\n")
fw.write("                          -0.053696 -0.353614 -0.066515\n")
fw.write("                          -0.053350 -0.364906 0.024740\n")
fw.write("                          -0.062590 -0.350682 -0.032559\n")
fw.write("                          -0.061948 -0.344179 0.003895\n")
fw.write("                          -0.020606 -0.355631 0.050765\n")
fw.write("                          0.000000 -0.369498 0.053682\n")
fw.write("                          -0.042531 -0.334741 0.037225\n")
fw.write("                          0.000000 -0.336840 0.051702\n")
fw.write("                          0.000000 -0.283913 -0.028742\n")
fw.write("                          0.000000 -0.320522 0.045586\n")
fw.write("                          0.000000 -0.305661 0.022285\n")
fw.write("                          0.000000 -0.289770 0.033367\n")
fw.write("                          0.062590 -0.350682 -0.032559\n")
fw.write("                          0.061948 -0.344179 0.003895\n")
fw.write("                          0.059702 -0.383669 -0.019111\n")
fw.write("                          0.053350 -0.364906 0.024740\n")
fw.write("                          0.041118 -0.386758 -0.088144\n")
fw.write("                          0.027685 -0.415927 0.007187\n")
fw.write("                          0.021038 -0.411910 -0.076377\n")
fw.write("                          0.020606 -0.355631 0.050765\n")
fw.write("                          0.053696 -0.353614 -0.066515\n")
fw.write("                          0.046174 -0.353816 -0.095481\n")
fw.write("                          0.042531 -0.334741 0.037225\n")
fw.write("                          0.027935 -0.354812 -0.112338\n")
fw.write("                          0.000000 -0.391103 -0.105359\n")
fw.write("                          0.000000 -0.403423 -0.094239\n\n")
for i in range(2468):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x1,y1,z1 = numbers.split(" ")
for i in range(1994):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x2,y2,z2 = numbers.split(" ")
for i in range(1064):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x3,y3,z3 = numbers.split(" ")
for i in range(3791):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x4,y4,z4 = numbers.split(" ")
for i in range(2976):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x40,y40,z40 = numbers.split(" ")
for i in range(27):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x41,y41,z41 = numbers.split(" ")
for i in range(34):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x5,y5,z5 = numbers.split(" ")
for i in range(5718):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x6,y6,z6 = numbers.split(" ")
for i in range(181):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x7,y7,z7 = numbers.split(" ")
for i in range(55):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x8,y8,z8 = numbers.split(" ")
for i in range(3058):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x9,y9,z9 = numbers.split(" ")
for i in range(3261):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x10,y10,z10 = numbers.split(" ")
for i in range(33):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x11,y11,z11 = numbers.split(" ")
for i in range(103):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x12,y12,z12 = numbers.split(" ")
for i in range(818):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x13,y13,z13 = numbers.split(" ")
for i in range(643):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x14,y14,z14 = numbers.split(" ")
for i in range(3171):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x15,y15,z15 = numbers.split(" ")
for i in range(698):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x16,y16,z16 = numbers.split(" ")
for i in range(1455):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x17,y17,z17 = numbers.split(" ")
for i in range(427):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x18,y18,z18 = numbers.split(" ")
for i in range(551):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x19,y19,z19 = numbers.split(" ")
for i in range(97):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x20,y20,z20 = numbers.split(" ")
for i in range(29):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x21,y21,z21 = numbers.split(" ")
for i in range(3037):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x22,y22,z22 = numbers.split(" ")
for i in range(55):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x23,y23,z23 = numbers.split(" ")
for i in range(321):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x24,y24,z24 = numbers.split(" ")
for i in range(979):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x25,y25,z25 = numbers.split(" ")
for i in range(1307):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x26,y26,z26 = numbers.split(" ")
for i in range(2351):
    waste = fr.readline()
numbers = fr.readline()
a,b,c,d,x27,y27,z27 = numbers.split(" ")
x28 = 0.0-float(x18)
x29 = 0.0-float(x19)
x30 = 0.0-float(x13)
x31 = 0.0-float(x17)
x32 = 0.0-float(x12)
x33 = 0.0-float(x11)
x34 = 0.0-float(x7)
x35 = 0.0-float(x20)
x36 = 0.0-float(x16)
x37 = 0.0-float(x6)
x38 = 0.0-float(x22)
x39 = 0.0-float(x4)
fr.close()
fw.write("deformed control points:  %s %s %s" % (x1, y1, z1))
fw.write("                          %s %s %s" % (x2, y2, z2))
fw.write("                          %s %s %s" % (x3, y3, z3))
fw.write("                          %s %s %s" % (x4, y4, z4))
fw.write("                          %s %s %s" % (x5, y5, z5))
fw.write("                          %s %s %s" % (x6, y6, z6))
fw.write("                          %s %s %s" % (x7, y7, z7))
fw.write("                          %s %s %s" % (x8, y8, z8))
fw.write("                          %s %s %s" % (x9, y9, z9))
fw.write("                          %s %s %s" % (x10, y10, z10))
fw.write("                          %s %s %s" % (x11, y11, z11))
fw.write("                          %s %s %s" % (x12, y12, z12))
fw.write("                          %s %s %s" % (x13, y13, z13))
fw.write("                          %s %s %s" % (x14, y14, z14))
fw.write("                          %s %s %s" % (x15, y15, z15))
fw.write("                          %s %s %s" % (x16, y16, z16))
fw.write("                          %s %s %s" % (x17, y17, z17))
fw.write("                          %s %s %s" % (x18, y18, z18))
fw.write("                          %s %s %s" % (x19, y19, z19))
fw.write("                          %s %s %s" % (x20, y20, z20))
fw.write("                          %s %s %s" % (x21, y21, z21))
fw.write("                          %s %s %s" % (x22, y22, z22))
fw.write("                          %s %s %s" % (x23, y23, z23))
fw.write("                          %s %s %s" % (0, y24, z24))
fw.write("                          %s %s %s" % (x25, y25, z25))
fw.write("                          %s %s %s" % (0, y26, z26))
fw.write("                          %s %s %s" % (x27, y27, z27))
fw.write("                          %s %s %s" % (x28, y18, z18))
fw.write("                          %s %s %s" % (x29, y19, z19))
fw.write("                          %s %s %s" % (x30, y13, z13))
fw.write("                          %s %s %s" % (x31, y17, z17))
fw.write("                          %s %s %s" % (x32, y12, z12))
fw.write("                          %s %s %s" % (x33, y11, z11))
fw.write("                          %s %s %s" % (x34, y7, z7))
fw.write("                          %s %s %s" % (x35, y20, z20))
fw.write("                          %s %s %s" % (x36, y16, z16))
fw.write("                          %s %s %s" % (x37, y6, z6))
fw.write("                          %s %s %s" % (x38, y22, z22))
fw.write("                          %s %s %s" % (x39, y4, z4))
fw.write("                          %s %s %s" % (x40, y40, z40))
fw.write("                          %s %s %s" % (x41, y41, z41))
fw.close()
